<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Exemplo de Formulário</h1>
    </header>

    <section>
        <form action="" name="f1" autocomplete="on">
            <fieldset>
                <legend>Dados Pessoais</legend>
                <div>
                    <label for="name">Nome: </label>
                    <input type="text" name="name" id="name" placeholder="Digite seu Nome Completo" autocomplete="name"
                        required size="25" minlength="5" maxlength="40">
                </div>
                <div>
                    <label for="email">E-mail: </label>
                    <input type="email" name="email" id="email" placeholder="Digite seu E-mail" autocomplete="email"
                        required size="25" maxlength="50" onblur="validacaoEmail(f1.email)"
                        pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z0-9]{2,4}$">
                </div>
                <div>
                    <label for="tel">Telefone: </label>
                    <input type="tel" name="tel" id="tel" placeholder="Digite seu Telefone com DDD" autocomplete="tel"
                        required size="23" minlength="8" maxlength="15">
                </div>
            </fieldset>
            <div id="submit">
                <input type="submit" value="Enviar" onclick="enviar()">
                <input type="reset" value="Limpar">
            </div>
        </form>
        <div id="res">

        </div>
    </section>

    <footer>
        <p>&copy andersonRoldão</p>
    </footer>

    <script>
        let nome = document.getElementById('name')
        let email = document.getElementById('email')
        let tel = document.getElementById('tel')
        let msg = document.getElementById('res')

        function validacaoEmail(field) {
            let usuario = field.value.substring(0, field.value.indexOf("@"))
            let dominio = field.value.substring(field.value.indexOf("@") + 1, field.value.length)

            if (usuario.length >= 1 &&
                dominio.length >= 3 &&
                usuario.search("@") == -1 &&
                dominio.search("@") == -1 &&
                usuario.search(" ") == -1 &&
                dominio.search(" ") == -1 &&
                dominio.search(".") != -1 &&
                dominio.indexOf(".") >= 1 &&
                dominio.lastIndexOf(".") < dominio.length - 2) {
                res.innerHTML = ""
            } else {
                res.innerHTML = `<p><font color="red">E-mail inválido.</font></p>`
            }
        }

        function enviar() {
            if (nome.value.length >= 5 &&
                tel.value.length >= 8 &&
                res.innerHTML.length == 0) {
                alert(`${nome.value}, cadastro enviado com sucesso.`)
            } else {
                res.innerHTML = `<p><font color="red">Dados inválidos.</font></p>`
            }
        }
    </script>
</body>
</html>